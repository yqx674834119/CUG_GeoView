# GeoView 项目改动记录

**时间**: 2025-09-17 23:16:08

## 改动概述

根据用户需求，完成了以下几项重要改动：

1. 删除系统管理员模块，用例图只展示用户
2. 创建8个独立的功能用例图
3. 重构API文档，按照新模板格式化所有接口

## 详细改动记录

### 1. 用例图简化和重构

#### 1.1 主用例图创建
- **文件**: `/home/livablecity/GeoView/PlantUML/GeoView_Main_UseCase.puml`
- **操作**: 新建文件
- **内容**: 创建简化的主用例图，包含用户和8个核心功能用例
- **特点**: 
  - 删除了系统管理员角色
  - 只保留用户(User)作为参与者
  - 包含8个核心用例：文件上传、变化检测、目标检测、语义分割、场景分类、图像复原、图像预处理、历史记录

#### 1.2 独立功能用例图创建

##### 1.2.1 文件上传用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/FileUpload_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择文件、上传图像、验证文件格式、文件存储、获取文件信息等5个用例

##### 1.2.2 变化检测用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/ChangeDetection_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择模型、配置参数、执行检测、结果可视化、导出结果等5个用例

##### 1.2.3 目标检测用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/ObjectDetection_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择检测模型、设置检测参数、执行目标检测、标注结果显示、目标统计等5个用例

##### 1.2.4 语义分割用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/SemanticSegmentation_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择分割模型、设置分割参数、执行语义分割、分割结果展示、类别统计分析等5个用例

##### 1.2.5 场景分类用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/SceneClassification_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择分类模型、执行场景分类、分类结果显示、置信度分析、批量分类等5个用例

##### 1.2.6 图像复原用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/ImageRestoration_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含选择复原模型、执行图像复原、复原效果对比、质量评估、保存复原结果等5个用例

##### 1.2.7 图像预处理用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/ImagePreprocessing_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含直方图匹配、对比度增强、图像锐化、降噪处理、预处理预览等5个用例

##### 1.2.8 历史记录用例图
- **文件**: `/home/livablecity/GeoView/PlantUML/HistoryRecord_UseCase.puml`
- **操作**: 新建文件
- **功能**: 包含查看分析历史、筛选记录、查看详细结果、导出历史数据、删除记录等5个用例

### 2. API文档重构

#### 2.1 文档结构重构
- **文件**: `/home/livablecity/GeoView/backend/GeoView后端API接口文档.md`
- **操作**: 完全重写文档内容
- **改动内容**:
  - 按照用户提供的模板格式重新组织文档结构
  - 为每个功能模块添加"所有子功能"表格
  - 为每个接口添加标准化的"用户同步接口"表格
  - 添加详细的"接口数据元素说明"表格

#### 2.2 新增功能模块文档

##### 2.2.1 文件上传功能
- 子功能: 文件选择、文件上传、格式验证、文件存储、文件管理
- 接口标识符: FILE_UPLOAD_001
- 接口地址: /api/file/upload

##### 2.2.2 变化检测功能
- 子功能: 模型选择、参数配置、预处理选项、变化检测、结果可视化、统计分析
- 接口标识符: CHANGE_DETECTION_001
- 接口地址: /api/analysis/change_detection

##### 2.2.3 目标检测功能
- 子功能: 模型选择、参数设置、目标检测、边界框标注、类别标识、统计分析
- 接口标识符: OBJECT_DETECTION_001
- 接口地址: /api/analysis/object_detection

##### 2.2.4 语义分割功能
- 子功能: 模型选择、参数配置、语义分割、分割可视化、类别统计、精度评估
- 接口标识符: SEMANTIC_SEGMENTATION_001
- 接口地址: /api/analysis/semantic_segmentation

##### 2.2.5 场景分类功能
- 子功能: 模型选择、图像预处理、场景分类、结果排序、置信度分析、批量处理
- 接口标识符: SCENE_CLASSIFICATION_001
- 接口地址: /api/analysis/classification

##### 2.2.6 图像复原功能
- 子功能: 模型选择、复原处理、效果对比、质量评估、参数调优、结果保存
- 接口标识符: IMAGE_RESTORATION_001
- 接口地址: /api/analysis/image_restoration

##### 2.2.7 图像预处理功能
- 子功能: 直方图匹配、对比度增强、图像锐化、降噪处理、预处理预览、参数调节
- 包含两个接口:
  - 直方图匹配接口 (HISTOGRAM_MATCH_001): /api/analysis/histogram_match
  - 图像预处理接口 (IMAGE_PREPROCESSING_001): /api/analysis/image_pre

##### 2.2.8 历史记录功能
- 子功能: 历史查询、记录筛选、结果查看、数据导出、记录管理、统计分析
- 包含两个接口:
  - 历史记录列表接口 (HISTORY_LIST_001): /api/history/list
  - 特定类型结果接口 (ANALYSIS_SHOW_001): /api/analysis/show/<type>

##### 2.2.9 模型管理功能
- 子功能: 模型列表、模型信息、模型加载、性能监控、版本管理
- 接口标识符: MODEL_LIST_001
- 接口地址: /api/model/list/<model_type>

#### 2.3 文档格式标准化
- 所有接口都采用统一的表格格式
- 包含接口名称、接口标识符、接口类型、接口请求地址、接口通信方式、接口协议、发送方、接收方等标准字段
- 为每个接口添加详细的数据元素说明表格
- 保留了原有的错误处理、注意事项、配置说明等重要信息

## 文件变更统计

### 新增文件 (9个)
1. `/home/livablecity/GeoView/PlantUML/GeoView_Main_UseCase.puml`
2. `/home/livablecity/GeoView/PlantUML/FileUpload_UseCase.puml`
3. `/home/livablecity/GeoView/PlantUML/ChangeDetection_UseCase.puml`
4. `/home/livablecity/GeoView/PlantUML/ObjectDetection_UseCase.puml`
5. `/home/livablecity/GeoView/PlantUML/SemanticSegmentation_UseCase.puml`
6. `/home/livablecity/GeoView/PlantUML/SceneClassification_UseCase.puml`
7. `/home/livablecity/GeoView/PlantUML/ImageRestoration_UseCase.puml`
8. `/home/livablecity/GeoView/PlantUML/ImagePreprocessing_UseCase.puml`
9. `/home/livablecity/GeoView/PlantUML/HistoryRecord_UseCase.puml`

### 修改文件 (1个)
1. `/home/livablecity/GeoView/backend/GeoView后端API接口文档.md` - 完全重构

## 技术特点

### 用例图设计特点
- 采用PlantUML格式，便于版本控制和维护
- 遵循UML标准，使用标准的用例图符号
- 每个功能模块都有独立的用例图，便于理解和维护
- 用例关系清晰，包含扩展(extend)和包含(include)关系

### API文档设计特点
- 采用标准化的接口描述格式
- 每个功能模块都有完整的子功能描述
- 接口信息表格化，便于查阅和理解
- 数据元素说明详细，包含数据类型和备注信息
- 保持了与原有系统的兼容性

## 质量保证

### 文档一致性
- 用例图与API文档保持一致
- 功能模块划分清晰
- 接口命名规范统一

### 可维护性
- 文件结构清晰
- 模块化设计
- 标准化格式

## 后续建议

1. **用例图可视化**: 建议使用PlantUML工具生成可视化的用例图
2. **API文档验证**: 建议与实际后端代码进行对比验证
3. **文档同步**: 建议建立文档与代码的同步更新机制
4. **用户测试**: 建议进行用户体验测试，验证用例图的完整性

## 总结

本次改动成功完成了用户的所有要求：
1. ✅ 删除了系统管理员模块，用例图只展示用户
2. ✅ 创建了8个独立的功能用例图，涵盖所有核心功能
3. ✅ 按照新模板重构了API文档，标准化了所有接口描述

所有改动都遵循了软件工程的最佳实践，确保了文档的专业性、可读性和可维护性。